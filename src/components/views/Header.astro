---
import { Icon } from "astro-icon/components";
import logo from "../../../public/logo.svg";
import { Image } from "astro:assets";
---

<header class="bg-gray-100 shadow-md h-16 w-full sticky top-0 z-50">
	<div
		class="container mx-auto flex items-center justify-between relative px-2 py-2 h-full"
	>
		<a href="/" aria-label="Inicio" class="ml-6 lg:ml-0">
			<Image
				src={logo}
				alt="Pulidos Daniel Logo"
				class="h-9 w-20"
				title="Logo Pulidos Daniel"
			/>
		</a>
		<nav class="hidden md:flex" aria-label="Navegación Principal">
			<ul class="flex space-x-8 md:px-6 lg:px-0">
				<li class="text-base text-gray-500 hover:text-ebony">
					<a href="#inicio">Inicio</a>
				</li>
				<li class="text-base text-gray-500 hover:text-ebony">
					<a href="#servicios">Servicios</a>
				</li>
				<li class="text-base text-gray-500 hover:text-ebony">
					<a href="#resultados">Resultados</a>
				</li>
				<li class="text-base text-gray-500 hover:text-ebony">
					<a href="#contacto">Contacto</a>
				</li>
			</ul>
		</nav>
		<button
			id="menu-button"
			class="md:hidden flex items-center p-2 text-gray-500 hover:text-ebony relative z-10"
			type="button"
			title="Abrir Menú"
			aria-controls="mobile-menu"
			aria-expanded="false"
		>
			<Icon name="menu-icon" size={32} id="menu-icon" class="mr-3" />
			<Icon
				name="close-menu"
				size={32}
				id="close-icon"
				class="mr-3 hidden"
			/>
			<span class="sr-only">Abrir Menú de Navegación</span>
		</button>
	</div>

	<div
		id="mobile-menu"
		class="bg-gray-100 md:hidden fixed inset-0 mx-auto shadow-lg z-20 hidden"
		aria-labelledby="mobile-menu-button"
	>
		<div
			class="container mx-auto flex items-center justify-between h-16 px-2 py-2"
		>
			<a href="#hero" aria-label="Inicio" class="ml-6">
				<Image src={logo} alt="Pulidos Daniel Logo" class="h-9 w-20" />
			</a>
			<button
				id="close-menu-button"
				class="flex items-center text-ebony relative z-10 mr-2"
				type="button"
				title="Cerrar Menú"
				aria-controls="mobile-menu"
				aria-expanded="true"
			>
				<Icon
					name="close-menu"
					size={32}
					id="close-icon-in-menu"
					class="mr-3 hover:text-secondary"
				/>
				<span class="sr-only">Cerrar Menú de Navegación</span>
			</button>
		</div>

		<nav
			id="mobile-menu-nav"
			class="flex flex-col justify-center items-center py-12"
			aria-label="Navegación Móvil"
		>
			<ul class="space-y-8">
				<li
					class="text-center text-2xl text-gray-500 hover:text-ebony transition-transform hover:scale-125"
				>
					<a href="#inicio">Inicio</a>
				</li>
				<li
					class="text-center text-2xl text-gray-500 hover:text-ebony transition-transform hover:scale-125"
				>
					<a href="#servicios">Servicios</a>
				</li>
				<li
					class="text-center text-2xl text-gray-500 hover:text-ebony transition-transform hover:scale-125"
				>
					<a href="#resultados">Resultados</a>
				</li>
				<li
					class="text-center text-2xl text-gray-500 hover:text-ebony transition-transform hover:scale-125"
				>
					<a href="#contacto">Contacto</a>
				</li>
			</ul>
		</nav>
	</div>
</header>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const menuButton = document.getElementById(
			"menu-button"
		) as HTMLElement;
		const mobileMenu = document.getElementById(
			"mobile-menu"
		) as HTMLElement;
		const mobileMenuNav = document.getElementById(
			"mobile-menu-nav"
		) as HTMLElement;
		const menuIcon = document.getElementById("menu-icon") as HTMLElement;
		const closeIcon = document.getElementById("close-icon") as HTMLElement;
		const closeIconInMenu = document.getElementById(
			"close-icon-in-menu"
		) as HTMLElement;

		let isHidden = true;

		const toggleMenuVisibility = () => {
			isHidden = !isHidden;
			mobileMenu.classList.toggle("hidden", isHidden);
			menuIcon.classList.toggle("hidden", !isHidden);
			closeIcon.classList.toggle("hidden", isHidden);
		};

		menuButton.addEventListener("click", toggleMenuVisibility);
		closeIconInMenu.addEventListener("click", toggleMenuVisibility);
		mobileMenuNav.addEventListener("click", toggleMenuVisibility);
	});
</script>

<style>
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		border: 0;
	}
</style>
